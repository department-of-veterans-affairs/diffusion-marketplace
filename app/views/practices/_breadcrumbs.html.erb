<section class="grid-container">
  <div id="breadcrumbs" class="grid-col-auto usa-breadcrumb breadcrumbs-container" aria-label="Breadcrumbs">
    <ol class="usa-breadcrumb__list">
      <% unless params[:action] == 'index' && params[:controller] == 'home' %>
        <li class="usa-breadcrumb__list-item">
          <a href="/">Home</a>
        </li>
      <% end %>
      <%
        breadcrumbs = session[:breadcrumbs]
      %>

      <% breadcrumbs.each_with_index do |b, i| %>
        <%
          last_crumb = breadcrumbs.size - 1 == i
        %>
          <% if !last_crumb %>
            <li class="usa-breadcrumb__list-item">
              <%= link_to(b['display'] || b[:display], b['path'] || b[:path], class: 'dm-external-link breadcrumb-link usa-breadcrumb__link') %>
            </li>
          <% elsif !last_crumb && b['display'] == 'Edit' %>
            <li class="usa-breadcrumb__list-item">
              <%= link_to(b['display'] || b[:display], b['path'] || b[:path], class: 'dm-external-link breadcrumb-link usa-breadcrumb__link') %>
            </li>
          <% elsif last_crumb && b['display'] == 'Edit' %>
            <li class="usa-breadcrumb__list-item usa-current" aria-current="page">
              <span><%= b['display'] || b[:display] %></span>
            </li>
          <% else %>
            <li class="usa-breadcrumb__list-item usa-current" aria-current="page">
              <span><%= b['display'] || b[:display] %></span>
            </li>
          <% end %>
      <% end %>
    </ol>
  </div>
</section>