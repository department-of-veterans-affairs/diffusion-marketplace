<div class="dm-background-linear-up-lightblue-to-white">
  <section class="grid-container x3-top">
    <%= render partial: 'shared/messages', locals: {small_text: false} %>
    <fieldset class="usa-fieldset">
      <input type="checkbox" name="show_disabled" id="show_disabled_users" class="usa-checkbox__input" value="show">
      <label class="usa-checkbox__label" for="show_disabled_users">Show disabled users</label>
    </fieldset>
    <table class="usa-table width-100">
      <thead>
        <tr>
          <th scope="col">Email</th>
          <th scope="col">Role</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |user| %>
          <tr class="<%= 'hide' if user.disabled %>" id="user_row_<%= user.id %>">
            <th scope="row"><%= user.email %></th>
            <%= render partial: 'action_buttons', locals: { user: user } %>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div class='grid-row space-between'>
      <div class='grid-col flex-1'>
        <%= paginate @users %>
      </div>
      <div class='grid-col flex-1 x4-bottom'>
        <%= form_tag controller: :admin, action: :create_user, class: 'usa-form' do |f| %>
          <div class='grid-row '>
            <div class='x1-right'><%= label_tag 'user[email]', 'New user email:', class: 'usa-label' %></div>
            <div class='grid-col flex-2'><%= text_field_tag 'user[email]', nil, placeholder: 'New user email', required: true, class: 'usa-input' %></div>
            <%= hidden_field_tag 'user[skip_va_validation]', value: true %>
            <%= hidden_field_tag 'user[confirmed_at]', value: Time.now %>
            <div class='grid-col x1-left'><%= submit_tag 'Create User', class: 'dm-button dm-button-primary' %></div>
        <% end %>
      </div>
      </div>
    </div>
  </section>
</div>
