<%# Utilized the body instead of just the main because there were white patches below main content on larger viewports %>
<% provide :body_classes, 'bg-gray-2' %>
<% provide :footer_classes, 'bg-gray-2' %>
<% provide :head_tags do %>
  <%= javascript_tag 'data-turbolinks-track': 'reload' do %>
    <%= render partial: 'search', formats: [:js] %>
  <% end %>
<% end %>

<div id="search-page">
  <section class="grid-container">
    <%= render partial: "shared/messages", locals: {small_text: false} %>
    <div class="grid-row">
      <form id="dm-practice-search-form" name="dm-practice-search-form" class="usa-search usa-search--big margin-bottom-2 grid-col-12">
        <div role="search" class="flex-column">
          <label class="margin-bottom-1" for="dm-practice-search-field"></label>
          <div id="search-bar-container" class="display-flex">
            <input class="usa-input" id="dm-practice-search-field" required title="Type at least three characters to search." autocomplete="off" type="search" name="search">
            <button id="dm-practice-search-button" class="usa-button" type="submit" name="search-button">
              <span class="usa-search__submit-text text-bold">Search</span>
            </button>
          </div>
        </div>
      </form>
      <div class="usa-accordion usa-accordion--bordered position-relative">

        <!-- Use the accurate heading level to maintain the document outline -->
        <h2 class="usa-accordion__heading">
          <button class="usa-accordion__button"
                  aria-expanded="true"
                  aria-controls="search_filters_dropdown">
            Filters
          </button>
        </h2>
        <div id="search_filters_dropdown" class="usa-accordion__content usa-prose position-absolute width-full z-400 bg-gray-5 p0">
          <%= render partial: 'practices/search_partials/search_filters' %>
        </div>
      </div>
    </div>

    <section id="dm-search-practices" class="dm-search-practices display-none">
      <p class="margin-bottom-3 font-sans-lg" id="results-summary"></p>
      <div id="search-results"></div>
    </section>

    <section id="no-search-query-content" class="position-relative margin-x-auto">
      <p id="no-query-p" class="position-relative z-100 padding-bottom-3 line-height-26 text-center">
        Enter a search term or use the filters to find  matching practices
      </p>
      <p id="no-query-results-p">
        There are currently no matches for your search on the Marketplace.
      </p>
      <i class="fas fa-search no-search-query-icon position-absolute z-index-0 text-base-lightest"></i>
    </section>
  </section>
</div>

