<% resource ||= nil
   placeholder ||= 'RANDOM_NUMBER_OR_SOMETHING'
   placeholder = placeholder.to_s + '_file'
%>
<div id="problem_resource_file_form<%= "_#{placeholder}" if resource %>" <% if resource %> class="resource_container margin-bottom-5" <% end %>>
  <input type="hidden" name="practice[practice_problem_resources_attributes][<%= placeholder %>][resource_type]" value="file"/>
  <% if resource&.id  %>
    <%= link_to(resource&.attachment&.original_filename, resource&.attachment_s3_presigned_url, target: '_blank')%>
    <input value="<%= resource&.id %>" type="hidden" name="practice[practice_problem_resources_attributes][<%= placeholder %>][id]"/>
  <% else %>
    <div class="grid-col-12 margin-bottom-3 margin-x-auto float-left">
      <label class="usa-label" for="input-single">Upload a .pdf, .docx, .xlxs, .jpg, .jpeg, or .png file that is less than 32MB</label>
      <input <%= resource&.id ? 'required' : '' %> id="practice_problem-input-single_<%= placeholder %>" class="usa-file-input usa-hint problem-file-attachment" type="file" name="practice[practice_problem_resources_attributes][<%= placeholder %>][attachment]" accept=".pdf,.docx,.xlxs,.jpg,.jpeg,.png" aria-describedby="input-single-hint" />
      <input type="text" readonly class="margin-top-1 margin-bottom-3" style="display: none; color:red; border-color: darkred" id="problem_file_err_message_attachment" value="Please upload a file."/>
    </div>
  <% end %>
  <%= label_tag 'practice_problem_resources_name', 'File name', class: 'usa-label', for: "practice_problem_resources_attributes_#{placeholder}_name" %>
    <input <%= resource&.id ? 'required' : '' %> class="usa-input" value="<%= resource&.name %>" type="text" name="practice[practice_problem_resources_attributes][<%= placeholder %>][name]" id="practice_problem_resources_attributes_<%= placeholder %>_name" style="width: 393px"/>
  <input type="text" readonly class="margin-top-1 margin-bottom-3" style="display: none; color:red; border-color: darkred" id="problem_file_err_message_name" value="Please enter a file name."/>
    <%= label_tag 'practice_problem_resources_description', 'File description', class: 'usa-label', for: "practice_problem_resources_attributes_#{placeholder}_description" %>
    <input <%= resource&.id ? 'required' : '' %> class="usa-input" value="<%= resource&.description %>"  type="text" name="practice[practice_problem_resources_attributes][<%= placeholder %>][description]" id="practice_problem_resources_attributes_<%= placeholder %>_description" style="width: 643px"/>
  <input type="text" readonly class="margin-top-1 margin-bottom-3" style="display: none; color:red; border-color: darkred" id="problem_file_err_message_description" value="Please enter a file description."/>
  <% if resource %>
    <div class="grid-col-12 trash-container">
      <input type="hidden" value="false" name="practice[practice_problem_resources_attributes][<%= placeholder %>][_destroy]"/>
      <button type="button" class="usa-button usa-button--unstyled text-red-50 remove_nested_fields">Delete entry</button>
    </div>
  <% else %>
    <div id="cancelAddButtonRow" class="grid-row margin-bottom-8">
      <button type="button" id="cancel_problem_resource_file" class=" usa-button usa-button--outline dm-btn-primary
              editor-back-to-link margin-right-1 padding-2 margin-bottom-5 text-no-underline">Cancel</button>

      <button type="button" class="add-resource usa-button usa-button-outline pe-continue padding-2
              margin-right-1 margin-bottom-5">Add file</button>
    </div>
  <% end %>

</div>

