function paginatedPracticeListPageComponent() {
  <% type = @pagy_type.split('-')[0] %>
  <% component_index = @pagy_type.split('-')[1] %>
  <% if type == "practices" %>
    var practicesClass = ".dm-paginated-" + <%= component_index %> + "-practices";

    <% data_set = @practice_list_components[component_index.to_i][:practices] %>
    <% pagy = @practice_list_components[component_index.to_i][:pagy] %>

    <% current_page = pagy.page %>
    <% next_page = pagy.next %>

    // Append the next set of practice cards to the current set
    $(practicesClass).append("<%= escape_javascript render(partial: 'shared/practice_cards_row', locals: {
      practices: data_set,
      component_index: component_index.to_i})
    %>")

    // If there's another set of cards, remove the current 'Load more' link and then add one for the next page
    var currentPageClass = ".dm-paginated-practices-" + <%= component_index %> + "-link";
    var loadMoreBtnContainer = ".dm-load-more-practices-" + <%= component_index %> + "-btn-container";

    <% if next_page.present? %>
      $(currentPageClass).remove();

      <% link = pagy_link_proc(pagy) %>
      $(loadMoreBtnContainer).append(`<%= link.call(next_page, 'Load more').html_safe %>`);
    <% else %>
      // If there isn't another set, remove the current 'Load more' link and add proper margin to the container
      $(currentPageClass).remove();
    <% end %>
  <% end %>
}

$(paginatedPracticeListPageComponent)

function paginatedEventListPageComponent() {
  <% type = @pagy_type.split('-')[0] %>
  <% component_index = @pagy_type.split('-')[1] %>
  <% if type == "events" %>
    var eventsClass = ".dm-paginated-" + <%= component_index %> + "-events";

    <% data_set = @event_list_components[component_index.to_i][:events] %>
    <% pagy = @event_list_components[component_index.to_i][:pagy] %>

    <% current_page = pagy.page %>
    <% next_page = pagy.next %>

    // Append the next set of practice cards to the current set
    $(eventsClass).append("<%= escape_javascript render(partial: 'events_list', locals: {
      events: data_set,
      component_index: component_index.to_i})
    %>")

    // If there's another set of cards, remove the current 'Load more' link and then add one for the next page
    var currentPageClass = ".dm-paginated-events-" + <%= component_index %> + "-link";
    var loadMoreBtnContainer = ".dm-load-more-events-" + <%= component_index %> + "-btn-container";

    <% if next_page.present? %>
      $(currentPageClass).remove();
      <% link = pagy_link_proc(pagy) %>
      $(loadMoreBtnContainer).append(`<%= link.call(next_page, 'Load more').html_safe %>`);
    <% else %>
      // If there isn't another set, remove the current 'Load more' link and add proper margin to the container
      $(currentPageClass).remove();
    <% end %>
  <% end %>
}

$(paginatedEventListPageComponent)

function paginatedNewsItemListPageComponent() {
  <% type = @pagy_type.split('-')[0] %>
  <% component_index = @pagy_type.split('-')[1] %>
  <% if type == "news" %>
    var newsItemsClass = ".dm-paginated-" + <%= component_index %> + "-news-items";

    <% data_set = @news_items_components[component_index.to_i][:news_items] %>
    <% pagy = @news_items_components[component_index.to_i][:pagy] %>

    <% current_page = pagy.page %>
    <% next_page = pagy.next %>


    // Append the next set of practice cards to the current set
    $(newsItemsClass).append("<%= escape_javascript render(partial: 'news_items_list', locals: {
      news_items: data_set,
      component_index: component_index.to_i})
    %>")

    // If there's another set of cards, remove the current 'Load more' link and then add one for the next page
    var currentPageClass = ".dm-paginated-news-items-" + <%= component_index %> + "-link";
    var loadMoreBtnContainer = ".dm-load-more-news-items-" + <%= component_index %> + "-btn-container";

    <% if next_page.present? %>
      $(currentPageClass).remove();

      <% link = pagy_link_proc(pagy) %>
      $(loadMoreBtnContainer).append(`<%= link.call(next_page, 'Load more').html_safe %>`);
    <% else %>
      // If there isn't another set, remove the current 'Load more' link and add proper margin to the container
      $(currentPageClass).remove();
    <% end %>
  <% end %>
}

$(paginatedNewsItemListPageComponent)
