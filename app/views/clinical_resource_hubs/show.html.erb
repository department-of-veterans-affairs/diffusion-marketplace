<% provide :main_classes, 'bg-gray-2' %>
<% provide :body_classes, 'bg-gray-2' %>
<% provide :footer_classes, 'bg-gray-2' %>

<% provide :head_tags do %>
  <%= javascript_include_tag '_practice_card_utilities', 'data-turbolinks-track': 'reload' %>
  <%= javascript_include_tag 'va_facilities/facility_adopted_practice_search', 'data-turbolinks-track': 'reload' %>
  <%= javascript_include_tag 'va_facilities/facility_created_practice_search', 'data-turbolinks-track': 'reload' %>
<% end %>
<section class="usa-section padding-y-0 grid-col-12" id="dm-va-facilities-show">
<!--  <input type="hidden" id="facility_station_number" value="<%#= @crh.station_number %>"/>-->
  <div class="grid-container position-relative grid-col-12">
    <h1 class="margin-top-0 margin-bottom-3">
      <%= @crh.official_station_name %>
    </h1>
    <div class="grid-row grid-gap-3 margin-bottom-10">
      <div class="grid-col-12 line-height-26"> This Clinical Resource Hub (CRH) serves veterans in <%= @states_str %>. It has created <%= @crh.practices_created_by_crh_count %> innovations and has adopted <%= @crh.practices_adopted_by_crh_count %> innovations.
      </div>
    </div>
<!--    <div>-->
<!--      VISN Number: <%#= params["id"] %>-->
<!--      VISN_ID: <%#= @crh.visn_id %>-->
<!--    </div>-->
    <h2 class="font-sans-xl line-height-37px margin-bottom-1 margin-top-5">Search in this Clinical Resource Hub</h2>
    <form id="crh-show-search-form" class="usa-form maxw-none margin-bottom-3">
      <fieldset class="usa-fieldset" data-search-filter="false">
        <legend class="usa-sr-only">Search for innovations by CRH</legend>
        <div class="grid-row" role="radiogroup">
          <div class="usa-radio grid-col-4 margin-bottom-5">
            <input class="usa-radio__input crh-created-practices-radio" id="created-practices" type="radio" name="visns-show-radio-buttons" value="created">
            <label class="usa-radio__label margin-bottom-0" for="created-practices">Innovations created here (<%= @crh.practices_created_by_crh_count %>)</label>
          </div>
          <div class="usa-radio grid-col-4">
            <input class="usa-radio__input crh-adopted-practices-radio" id="adopted-practices" type="radio" name="visns-show-radio-buttons" value="adopted">
            <label class="usa-radio__label margin-bottom-0" for="adopted-practices">Innovations adopted here (<%= @crh.practices_adopted_by_crh_count %>)</label>
          </div>
        </div>

        <div class="grid-row grid-gap-3 display-flex flex-align-end">
          <div class="grid-col-8">
            <div class="usa-search" role="search">
              <label class="usa-sr-only" for="visn-search-field">Search</label>
              <input class="usa-input" id="visn-search-field" type="search" name="search" autocomplete="off">
              <button id="visn-search-button" class="usa-button margin-top-0" type="submit">
                <span class="usa-search__submit-text">Search</span>
              </button>
            </div>
          </div>
          <%= render partial: 'visns/categories_combo_box', locals: { practice_type: 'created', practice_categories: @practices_created_categories } %>
          <%#= render partial: 'categories_combo_box', locals: { practice_type: 'adopted', practice_categories: @practices_adopted_categories } %>
        </div>
      </fieldset>
    </form>

    <%= render partial: 'shared/search_sort_select_section', locals: {
        sort_options: [
            ['Sort by most adopted innovations', 'adoptions', class: 'usa-select'],
            ['Sort by A to Z', 'a_to_z', class: 'usa-select'],
            ['Sort by most recently added', 'added', class: 'usa-select']
        ],
        section_id: 'dm-visn-search-practices',
        section_classes: 'display-none',
        first_div_classes: 'grid-row grid-gap-3 margin-bottom-105 flex-align-center',
        second_div_classes: 'grid-col-4'
    }
    %>
    <%= render partial: 'shared/loading_spinner', locals: { display: false, classes: 'dm-visn-search-loading-spinner flex-justify-center flex-align-self-center margin-y-8 desktop:margin-y-10' } %>
    <%= render partial: 'shared/search_no_results', locals: { display_no_query_msg: false } %>

  </div>
<!--</section>-->
<!--<section id="visns-show-search">-->

</section>

